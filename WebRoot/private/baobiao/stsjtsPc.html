<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>$!app_name</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- 框架 -->
    <link href="${base}/include/css/default.css" rel="stylesheet" type="text/css"/>
    <script type='text/javascript'>
        var CONTEXTPATH = '${base}';
        var stylePath = '$!stylename';

    </script>
    <script src="${base}/include/js/main.js"></script>
    <script src="${base}/include/js/string.js"></script>
    <!-- 分页  注意顺序 -->
    <link href="${base}/include/css/themes/gray/easyui.css" rel="stylesheet" type="text/css"/>
    <script src="${base}/include/js/jquery.easyui.min.js"></script>
    <!-- 树 -->
    <script type="text/javascript" src="${base}/include/controls/ztree/jquery.ztree.core-3.5.min.js"></script>
    <link rel="stylesheet" href="${base}/include/controls/ztree/zTreeStyle/zTreeStyle.css" type="text/css">
    <script src="${base}/include/controls/my97/WdatePicker.js"></script>


<SCRIPT type="text/javascript">

	function initButton() {
		Page.initBtn();
		$!initBtn
	}
	function getWidth(percent) {
		return document.body.clientWidth * percent;
	}
	
	function loadData() {
		$("#dg1").datagrid(
		{
			width : "auto",
			height : "auto",
			nowrap : true,
			striped : true,
			border : true,
			collapsible : false,//是否可折叠的  
			fit : true,//自动大小  
			url : "${base}/private/baobiao/sxyjhPcList",
			queryParams : {
				"xy_type" : '$!xy_type',"startdate":'$!startdate',"enddate":'$!enddate'
			},//首次查询参数
			remoteSort : false,
			idField : "id",
			singleSelect : true,//是否单选  
			pagination : true,//分页控件  
			rownumbers : true,//行号  
			fitColumns : true,//行自适应
			pageSize : 10,
			pageList : [ 5, 10, 15, 20, 30, 40, 50 ],
			loadMsg : '数据加载中...',
			columns : [ [
					{
						title : '行政许可',
						field : 'xzxkname',
						width : getWidth(0.3),
						align : 'center'
					},
					{
						title : '推送时间',
						field : 'tstime',
						width : getWidth(0.2),
						align : 'center'
					},
					{
						title : '推送条数',
						field : 'tsjl',
						width : getWidth(0.2),
						align : 'center',
						formatter : function(val, rec) {
							val = "<a href='javascript:void(0);' onClick=\"preview('"
									+ rec.tstime + "');\">"+val+"</a>";
							return val;
						}
					}
					]]
		});
		//设置分页控件  
		var p = $("#dg1").datagrid("getPager");
		$(p).pagination({
			beforePageText : "第",//页数文本框前显示的汉字  
			afterPageText : "页    共 {pages} 页",
			displayMsg : "当前显示 {from} - {to} 条记录   共 {total} 条记录",
			onBeforeRefresh : function() {
				$(this).pagination('loading');
				$(this).pagination('loaded');
			}
		});
	}

	function preview(xyptmodify_date) {
		var name="";
		var url="${base}/private/baobiao/sxyjhYm?xy_type="+'$!xy_type'+"&tssj="+xyptmodify_date;
		parent.addTab(name,url);
	}

	//返回初始页
	function showcy(canshu) {
		$("#title").val(canshu);
		loadData();
	}

	Page.onLoad(function() {
		loadData();
		initButton();
	});
	$(window).resize(function() {
		clearTimeout(timer);
		timer = setTimeout(function() {
			$('#dg1').datagrid('resize');
			$('div.panel-body').css('width', 'auto'); //////
		}, 100);
	});
//-->
</SCRIPT>
</head>
<body leftmargin="0" topmargin="0" class="easyui-layout">
	<form name="form1" id="form1" method="post">
		<input type="hidden" name="checkids" id="checkids" value=""> 
		<div region="north" border="false"
			style="overflow: hidden; padding: 10px 10px 0px 10px">
			<table width="100%" border="0" cellspacing="0" cellpadding="0"
				class="blockTable">
				<tr>
					<td class="blockTd">
						<table width="100%" border="0" cellspacing="0" cellpadding="6">
							<tr>
								<td style="padding: 8px 0 4px 6px;" nowrap="nowrap">
									<span>
                                       <input type="button" name="check"
										id="check" value="返回" onclick="javascript:history.back(-1);" />
									</span>

								</span></td>
							</tr>
						</table>
					</td>
				</tr>

			</table>
		</div>
		<div region="center" border="false"
			style="width: 100%; height: 100%; padding: 0px 10px 10px;">
			<div id="dg1" style="width: 100%; height: 100%;"></div>
		</div>

	</form>
</body>
</html>
