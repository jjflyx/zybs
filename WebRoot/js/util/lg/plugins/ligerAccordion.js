(function(a){a.fn.ligerAccordion=function(b){return a.ligerui.run.call(this,"ligerAccordion",arguments);};a.fn.ligerGetAccordionManager=function(){return a.ligerui.get(this);};a.ligerDefaults.Accordion={height:null,speed:"normal",changeHeightOnResize:false,heightDiff:0};a.ligerMethos.Accordion={};a.ligerui.controls.Accordion=function(c,b){a.ligerui.controls.Accordion.base.constructor.call(this,c,b);};a.ligerui.controls.Accordion.ligerExtend(a.ligerui.core.UIComponent,{__getType:function(){return"Accordion";},__idPrev:function(){return"Accordion";},_extendMethods:function(){return a.ligerMethos.Accordion;},_render:function(){var c=this,d=this.options;c.accordion=a(c.element);if(!c.accordion.hasClass("l-accordion-panel")){c.accordion.addClass("l-accordion-panel");}var b=0;if(a("> div[lselected=true]",c.accordion).length>0){b=a("> div",c.accordion).index(a("> div[lselected=true]",c.accordion));}a("> div",c.accordion).each(function(e,f){var g=a('<div class="l-accordion-header"><div class="l-accordion-toggle"></div><div class="l-accordion-header-inner"></div></div>');if(e==b){a(".l-accordion-toggle",g).addClass("l-accordion-toggle-open");}if(a(f).attr("title")){a(".l-accordion-header-inner",g).html(a(f).attr("title"));a(f).attr("title","");}a(f).before(g);if(!a(f).hasClass("l-accordion-content")){a(f).addClass("l-accordion-content");}});a(".l-accordion-toggle",c.accordion).each(function(){if(!a(this).hasClass("l-accordion-toggle-open")&&!a(this).hasClass("l-accordion-toggle-close")){a(this).addClass("l-accordion-toggle-close");}if(a(this).hasClass("l-accordion-toggle-close")){a(this).parent().next(".l-accordion-content:visible").hide();}});a(".l-accordion-toggle",c.accordion).hover(function(){if(a(this).hasClass("l-accordion-toggle-open")){a(this).addClass("l-accordion-toggle-open-over");}else{if(a(this).hasClass("l-accordion-toggle-close")){a(this).addClass("l-accordion-toggle-close-over");}}},function(){if(a(this).hasClass("l-accordion-toggle-open")){a(this).removeClass("l-accordion-toggle-open-over");}else{if(a(this).hasClass("l-accordion-toggle-close")){a(this).removeClass("l-accordion-toggle-close-over");}}});a(">.l-accordion-header",c.accordion).click(function(){var e=a(".l-accordion-toggle:first",this);if(e.hasClass("l-accordion-toggle-close")){e.removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over");e.addClass("l-accordion-toggle-open");a(this).next(".l-accordion-content").show(d.speed).siblings(".l-accordion-content:visible").hide(d.speed);a(this).siblings(".l-accordion-header").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close");}else{e.removeClass("l-accordion-toggle-open").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over").addClass("l-accordion-toggle-close");a(this).next(".l-accordion-content").hide(d.speed);}});c.headerHoldHeight=0;a("> .l-accordion-header",c.accordion).each(function(){c.headerHoldHeight+=a(this).height();});if(d.height&&typeof(d.height)=="string"&&d.height.indexOf("%")>0){c.onResize();if(d.changeHeightOnResize){a(window).resize(function(){c.onResize();});}}else{if(d.height){c.height=d.heightDiff+d.height;c.accordion.height(c.height);c.setHeight(d.height);}else{c.header=c.accordion.height();}}c.set(d);},onResize:function(){var b=this,c=this.options;if(!c.height||typeof(c.height)!="string"||c.height.indexOf("%")==-1){return false;}if(b.accordion.parent()[0].tagName.toLowerCase()=="body"){var d=a(window).height();d-=parseInt(b.layout.parent().css("paddingTop"));d-=parseInt(b.layout.parent().css("paddingBottom"));b.height=c.heightDiff+d*parseFloat(b.height)*0.01;}else{b.height=c.heightDiff+(b.accordion.parent().height()*parseFloat(c.height)*0.01);}b.accordion.height(b.height);b.setContentHeight(b.height-b.headerHoldHeight);},setHeight:function(b){var c=this,d=this.options;c.accordion.height(b);b-=c.headerHoldHeight;a("> .l-accordion-content",c.accordion).height(b);}});})(jQuery);