(function(a){a.fn.ligerSpinner=function(){return a.ligerui.run.call(this,"ligerSpinner",arguments);};a.fn.ligerGetSpinnerManager=function(){return a.ligerui.run.call(this,"ligerGetSpinnerManager",arguments);};a.ligerDefaults.Spinner={type:"float",isNegative:true,decimalplace:2,step:0.1,interval:50,onChangeValue:false,minValue:null,maxValue:null,disabled:false};a.ligerMethos.Spinner={};a.ligerui.controls.Spinner=function(c,b){a.ligerui.controls.Spinner.base.constructor.call(this,c,b);};a.ligerui.controls.Spinner.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"Spinner";},__idPrev:function(){return"Spinner";},_extendMethods:function(){return a.ligerMethos.Spinner;},_init:function(){a.ligerui.controls.Spinner.base._init.call(this);var b=this.options;if(b.type=="float"){b.step=0.1;b.interval=50;}else{if(b.type=="int"){b.step=1;b.interval=100;}else{if(b.type=="time"){b.step=1;b.interval=100;}}}},_render:function(){var b=this,c=this.options;b.interval=null;b.inputText=null;b.value=null;b.textFieldID="";if(this.element.tagName.toLowerCase()=="input"&&this.element.type&&this.element.type=="text"){b.inputText=a(this.element);if(this.element.id){b.textFieldID=this.element.id;}}else{b.inputText=a('<input type="text"/>');b.inputText.appendTo(a(this.element));}if(b.textFieldID==""&&c.textFieldID){b.textFieldID=c.textFieldID;}b.link=a('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>');b.wrapper=b.inputText.wrap('<div class="l-text"></div>').parent();b.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>');b.wrapper.append(b.link).after(b.selectBox).after(b.valueField);b.link.up=a(".l-spinner-up",b.link);b.link.down=a(".l-spinner-down",b.link);b.inputText.addClass("l-text-field");if(c.disabled){b.wrapper.addClass("l-text-disabled");}if(!b._isVerify(b.inputText.val())){b.value=b._getDefaultValue();b.inputText.val(b.value);}b.link.up.hover(function(){if(!c.disabled){a(this).addClass("l-spinner-up-over");}},function(){clearInterval(b.interval);a(document).unbind("selectstart.spinner");a(this).removeClass("l-spinner-up-over");}).mousedown(function(){if(!c.disabled){b._uping.call(b);b.interval=setInterval(function(){b._uping.call(b);},c.interval);a(document).bind("selectstart.spinner",function(){return false;});}}).mouseup(function(){clearInterval(b.interval);b.inputText.trigger("change").focus();a(document).unbind("selectstart.spinner");});b.link.down.hover(function(){if(!c.disabled){a(this).addClass("l-spinner-down-over");}},function(){clearInterval(b.interval);a(document).unbind("selectstart.spinner");a(this).removeClass("l-spinner-down-over");}).mousedown(function(){if(!c.disabled){b.interval=setInterval(function(){b._downing.call(b);},c.interval);a(document).bind("selectstart.spinner",function(){return false;});}}).mouseup(function(){clearInterval(b.interval);b.inputText.trigger("change").focus();a(document).unbind("selectstart.spinner");});b.inputText.change(function(){var d=b.inputText.val();b.value=b._getVerifyValue(d);b.trigger("changeValue",[b.value]);b.inputText.val(b.value);}).blur(function(){b.wrapper.removeClass("l-text-focus");}).focus(function(){b.wrapper.addClass("l-text-focus");});b.wrapper.hover(function(){if(!c.disabled){b.wrapper.addClass("l-text-over");}},function(){b.wrapper.removeClass("l-text-over");});b.set(c);},_setWidth:function(c){var b=this;if(c>20){b.wrapper.css({width:c});b.inputText.css({width:c-20});}},_setHeight:function(c){var b=this;if(c>10){b.wrapper.height(c);b.inputText.height(c-2);b.link.height(c-4);}},_setDisabled:function(b){if(b){this.wrapper.addClass("l-text-disabled");}else{this.wrapper.removeClass("l-text-disabled");}},setValue:function(b){this.inputText.val(b);},getValue:function(){return this.inputText.val();},_round:function(b,h){var d=this,f=this.options;var c=1;for(;h>0;c*=10,h--){}for(;h<0;c/=10,h++){}return Math.round(b*c)/c;},_isInt:function(e){var b=this,c=this.options;var d=c.isNegative?/^-?\d+$/:/^\d+$/;if(!d.test(e)){return false;}if(parseFloat(e)!=e){return false;}return true;},_isFloat:function(e){var b=this,c=this.options;var d=c.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;if(!d.test(e)){return false;}if(parseFloat(e)!=e){return false;}return true;},_isTime:function(e){var c=this,d=this.options;var b=e.match(/^(\d{1,2}):(\d{1,2})$/);if(b==null){return false;}if(b[1]>24||b[2]>60){return false;}return true;},_isVerify:function(e){var b=this,d=this.options;if(d.type=="float"){if(!b._isFloat(e)){return false;}var c=parseFloat(e);if(d.minValue!=undefined&&d.minValue>c){return false;}if(d.maxValue!=undefined&&d.maxValue<c){return false;}return true;}else{if(d.type=="int"){if(!b._isInt(e)){return false;}var c=parseInt(e);if(d.minValue!=undefined&&d.minValue>c){return false;}if(d.maxValue!=undefined&&d.maxValue<c){return false;}return true;}else{if(d.type=="time"){return b._isTime(e);}}}return false;},_getVerifyValue:function(d){var c=this,e=this.options;var b=null;if(e.type=="float"){b=c._round(d,e.decimalplace);}else{if(e.type=="int"){b=parseInt(d);}else{if(e.type=="time"){b=d;}}}if(!c._isVerify(b)){return c.value;}else{return b;}},_isOverValue:function(c){var b=this,d=this.options;if(d.minValue!=null&&d.minValue>c){return true;}if(d.maxValue!=null&&d.maxValue<c){return true;}return false;},_getDefaultValue:function(){var b=this,c=this.options;if(c.type=="float"||c.type=="int"){return 0;}else{if(c.type=="time"){return"00:00";}}},_addValue:function(b){var c=this,e=this.options;var d=c.inputText.val();d=parseFloat(d)+b;if(c._isOverValue(d)){return;}c.inputText.val(d);c.inputText.trigger("change");},_addTime:function(f){var c=this,e=this.options;var d=c.inputText.val();var b=d.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(b[2])+f;if(newminute<10){newminute="0"+newminute;}d=b[1]+":"+newminute;if(c._isOverValue(d)){return;}c.inputText.val(d);c.inputText.trigger("change");},_uping:function(){var b=this,c=this.options;if(c.type=="float"||c.type=="int"){b._addValue(c.step);}else{if(c.type=="time"){b._addTime(c.step);}}},_downing:function(){var b=this,c=this.options;if(c.type=="float"||c.type=="int"){b._addValue(-1*c.step);}else{if(c.type=="time"){b._addTime(-1*c.step);}}},_isDateTime:function(b){var e=this,f=this.options;var c=b.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(c==null){return false;}var h=new Date(c[1],c[3]-1,c[4]);if(h=="NaN"){return false;}return(h.getFullYear()==c[1]&&(h.getMonth()+1)==c[3]&&h.getDate()==c[4]);},_isLongDateTime:function(b){var f=this,h=this.options;var c=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var e=b.match(c);if(e==null){return false;}var i=new Date(e[1],e[3]-1,e[4],e[5],e[6]);if(i=="NaN"){return false;}return(i.getFullYear()==e[1]&&(i.getMonth()+1)==e[3]&&i.getDate()==e[4]&&i.getHours()==e[5]&&i.getMinutes()==e[6]);}});})(jQuery);