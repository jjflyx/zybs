(function(a){a.fn.ligerTextBox=function(){return a.ligerui.run.call(this,"ligerTextBox",arguments);};a.fn.ligerGetTextBoxManager=function(){return a.ligerui.run.call(this,"ligerGetTextBoxManager",arguments);};a.ligerDefaults.TextBox={onChangeValue:null,width:null,disabled:false,value:null,nullText:null,digits:false,number:false};a.ligerui.controls.TextBox=function(c,b){a.ligerui.controls.TextBox.base.constructor.call(this,c,b);};a.ligerui.controls.TextBox.ligerExtend(a.ligerui.controls.Input,{__getType:function(){return"TextBox";},__idPrev:function(){return"TextBox";},_init:function(){a.ligerui.controls.TextBox.base._init.call(this);var b=this,c=this.options;if(!c.width){c.width=a(b.element).width();}if(a(this.element).attr("readonly")){c.disabled=true;}},_render:function(){var b=this,c=this.options;b.inputText=a(this.element);b.wrapper=b.inputText.wrap('<div class="l-text"></div>').parent();b.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>');if(!b.inputText.hasClass("l-text-field")){b.inputText.addClass("l-text-field");}this._setEvent();b.set(c);b.checkValue();},_getValue:function(){return this.inputText.val();},_setNullText:function(){this.checkNotNull();},checkValue:function(){var c=this,d=this.options;var b=c.inputText.val();if(d.number&&!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(b)||d.digits&&!/^\d+$/.test(b)){c.inputText.val(c.value||0);return;}c.value=b;},checkNotNull:function(){var b=this,c=this.options;if(c.nullText&&!c.disabled){if(!b.inputText.val()){b.inputText.addClass("l-text-field-null").val(c.nullText);}}},_setEvent:function(){var b=this,c=this.options;b.inputText.bind("blur.textBox",function(){b.trigger("blur");b.checkNotNull();b.checkValue();b.wrapper.removeClass("l-text-focus");}).bind("focus.textBox",function(){b.trigger("focus");if(c.nullText){if(a(this).hasClass("l-text-field-null")){a(this).removeClass("l-text-field-null").val("");}}b.wrapper.addClass("l-text-focus");}).change(function(){b.trigger("changeValue",[this.value]);});b.wrapper.hover(function(){b.trigger("mouseOver");b.wrapper.addClass("l-text-over");},function(){b.trigger("mouseOut");b.wrapper.removeClass("l-text-over");});},_setDisabled:function(b){if(b){this.inputText.attr("readonly","readonly");this.wrapper.addClass("l-text-disabled");}else{this.inputText.removeAttr("readonly");this.wrapper.removeClass("l-text-disabled");}},_setWidth:function(b){if(b>20){this.wrapper.css({width:b});this.inputText.css({width:b-4});}},_setHeight:function(b){if(b>10){this.wrapper.height(b);this.inputText.height(b-2);}},_setValue:function(b){if(b!=null){this.inputText.val(b);}},_setLabel:function(d){var c=this,e=this.options;if(!c.labelwrapper){c.labelwrapper=c.wrapper.wrap('<div class="l-labeltext"></div>').parent();var b=a('<div class="l-text-label" style="float:left;">'+d+":&nbsp</div>");c.labelwrapper.prepend(b);c.wrapper.css("float","left");if(!e.labelWidth){e.labelWidth=b.width();}else{c._setLabelWidth(e.labelWidth);}b.height(c.wrapper.height());if(e.labelAlign){c._setLabelAlign(e.labelAlign);}c.labelwrapper.append('<br style="clear:both;" />');c.labelwrapper.width(e.labelWidth+e.width+2);}else{c.labelwrapper.find(".l-text-label").html(d+":&nbsp");}},_setLabelWidth:function(c){var b=this,d=this.options;if(!b.labelwrapper){return;}b.labelwrapper.find(".l-text-label").width(c);},_setLabelAlign:function(c){var b=this,d=this.options;if(!b.labelwrapper){return;}b.labelwrapper.find(".l-text-label").css("text-align",c);},updateStyle:function(){var b=this,c=this.options;if(b.inputText.attr("disabled")||b.inputText.attr("readonly")){b.wrapper.addClass("l-text-disabled");b.options.disabled=true;}else{b.wrapper.removeClass("l-text-disabled");b.options.disabled=false;}if(b.inputText.hasClass("l-text-field-null")&&b.inputText.val()!=c.nullText){b.inputText.removeClass("l-text-field-null");}b.checkValue();}});})(jQuery);