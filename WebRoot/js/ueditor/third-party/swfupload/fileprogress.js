function FileProgress(c,a){this.fileProgressID=c.id;this.opacity=100;this.height=0;this.fileProgressWrapper=document.getElementById(this.fileProgressID);if(!this.fileProgressWrapper){this.fileProgressWrapper=document.createElement("div");this.fileProgressWrapper.className="progressWrapper";this.fileProgressWrapper.id=this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className="progressContainer";var f=document.createElement("a");f.className="progressCancel";f.href="#";f.style.visibility="hidden";f.appendChild(document.createTextNode(" "));f.onclick=function(){alert(1);};var b=document.createElement("div");b.className="progressName";b.appendChild(document.createTextNode(c.name));var e=document.createElement("div");e.className="progressBarInProgress";var d=document.createElement("div");d.className="progressBarStatus";d.innerHTML="&nbsp;";this.fileProgressElement.appendChild(f);this.fileProgressElement.appendChild(b);this.fileProgressElement.appendChild(d);this.fileProgressElement.appendChild(e);this.fileProgressWrapper.appendChild(this.fileProgressElement);document.getElementById(a).appendChild(this.fileProgressWrapper);}else{this.fileProgressElement=this.fileProgressWrapper.firstChild;this.reset();}this.height=this.fileProgressWrapper.offsetHeight;this.setTimer(null);}FileProgress.prototype.setTimer=function(a){this.fileProgressElement["FP_TIMER"]=a;};FileProgress.prototype.getTimer=function(a){return this.fileProgressElement["FP_TIMER"]||null;};FileProgress.prototype.reset=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[2].innerHTML="&nbsp;";this.fileProgressElement.childNodes[2].className="progressBarStatus";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width="0%";this.appear();};FileProgress.prototype.setProgress=function(a){this.fileProgressElement.className="progressContainer green";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width=a+"%";this.appear();};FileProgress.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue";this.fileProgressElement.childNodes[3].className="progressBarComplete";this.fileProgressElement.childNodes[3].style.width="";var a=this;this.setTimer(setTimeout(function(){},10000));};FileProgress.prototype.setError=function(){this.fileProgressElement.className="progressContainer red";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var a=this;this.setTimer(setTimeout(function(){},3000));};FileProgress.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width="";var a=this;this.setTimer(setTimeout(function(){a.disappear();},1000));};FileProgress.prototype.setStatus=function(a){this.fileProgressElement.childNodes[2].innerHTML=a;};FileProgress.prototype.toggleCancel=function(b,c,f){var g=this.fileProgressElement.childNodes[0];g.style.visibility=b?"visible":"hidden";g.title=f?f:"取消上传";if(c){var d=this;var a=d.fileProgressID,h=d.fileProgressElement;h.children[0].onclick=function(){d.disappear();c.cancelUpload(a);return false;};}};FileProgress.prototype.appear=function(){if(this.getTimer()!==null){clearTimeout(this.getTimer());this.setTimer(null);}if(this.fileProgressWrapper.filters){try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100;}catch(a){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=100)";}}else{this.fileProgressWrapper.style.opacity=1;}this.fileProgressWrapper.style.height="";this.height=this.fileProgressWrapper.offsetHeight;this.opacity=100;this.fileProgressWrapper.style.display="";};FileProgress.prototype.disappear=function(){var f=15;var c=4;var b=30;if(this.opacity>0){this.opacity-=f;if(this.opacity<0){this.opacity=0;}if(this.fileProgressWrapper.filters){try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=this.opacity;}catch(d){this.fileProgressWrapper.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")";}}else{this.fileProgressWrapper.style.opacity=this.opacity/100;}}if(this.height>0){this.height-=c;if(this.height<0){this.height=0;}this.fileProgressWrapper.style.height=this.height+"px";}if(this.height>0||this.opacity>0){var a=this;this.setTimer(setTimeout(function(){a.disappear();},b));}else{this.fileProgressWrapper.style.display="none";this.setTimer(null);}};