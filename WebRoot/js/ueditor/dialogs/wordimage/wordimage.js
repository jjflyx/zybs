var wordImage={};var g=baidu.g,flashObj,flashContainer;wordImage.init=function(a,b){showLocalPath("localPath");createFlashUploader(a,b);addUploadListener();addOkListener();};function hideFlash(){flashObj=null;flashContainer.innerHTML="";}function addOkListener(){dialog.onok=function(){if(!imageUrls.length){return;}var a=domUtils.getElementsByTagName(editor.document,"img");for(var e=0,b;b=a[e++];){var f=b.getAttribute("word_img");if(!f){continue;}for(var d=0,c;c=imageUrls[d++];){if(f.indexOf(c.original.replace(" ",""))!=-1){b.src=editor.options.wordImagePath+c.url;b.setAttribute("data_ue_src",editor.options.wordImagePath+c.url);b.setAttribute("title",c.title);parent.baidu.editor.dom.domUtils.removeAttributes(b,["word_img","style","width","height"]);editor.fireEvent("selectionchange");break;}}}hideFlash();};dialog.oncancel=function(){hideFlash();};}function addUploadListener(){g("upload").onclick=function(){flashObj.upload();this.style.display="none";};}function showLocalPath(e){if(editor.word_img.length==1){g(e).value=editor.word_img[0];return;}var c=editor.word_img[0];var b=c.lastIndexOf("/")||0,a=c.lastIndexOf("\\")||0,d=b>a?"/":"\\";c=c.substring(0,c.lastIndexOf(d)+1);g(e).value=c;}function createFlashUploader(b,d){var e=utils.extend({},lang.flashI18n);for(var a in e){if(!(a in {"lang":1,"uploadingTF":1,"imageTF":1,"textEncoding":1})&&e[a]){e[a]=encodeURIComponent(editor.options.langPath+editor.options.lang+"/images/"+e[a]);}}b=utils.extend(b,e,false);var c={createOptions:{id:"flash",url:b.flashUrl,width:b.width,height:b.height,errorMessage:lang.flashError,wmode:browser.safari?"transparent":"window",ver:"10.0.0",vars:b,container:b.container}};c=extendProperty(d,c);flashObj=new baidu.flash.imageUploader(c);flashContainer=$G(b.container);}function extendProperty(a,c){for(var b in a){if(!c[b]){c[b]=a[b];}}return c;}function getPasteData(a){baidu.g("msg").innerHTML=lang.copySuccess+"</br>";setTimeout(function(){baidu.g("msg").innerHTML="";},5000);return baidu.g(a).value;}function createCopyButton(d,c){baidu.swf.create({id:"copyFlash",url:"fClipboard_ueditor.swf",width:"58",height:"25",errorMessage:"",bgColor:"#CBCBCB",wmode:"transparent",ver:"10.0.0",vars:{tid:c}},d);var b=baidu.swf.getMovie("copyFlash");var a=setInterval(function(){if(b&&b.flashInit){clearInterval(a);b.setHandCursor(true);b.setContentFuncName("getPasteData");}},500);}createCopyButton("clipboard","localPath");