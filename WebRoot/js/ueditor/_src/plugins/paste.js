(function(){function a(f){var d=this.document;if(d.getElementById("baidu_pastebin")){return;}var c=this.selection.getRange(),b=c.createBookmark(),e=d.createElement("div");e.id="baidu_pastebin";browser.webkit&&e.appendChild(d.createTextNode(domUtils.fillChar+domUtils.fillChar));d.body.appendChild(e);b.start.style.display="";e.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(b.start).y+"px";c.selectNodeContents(e).select(true);setTimeout(function(){if(browser.webkit){for(var g=0,h=d.querySelectorAll("#baidu_pastebin"),k;k=h[g++];){if(domUtils.isEmptyNode(k)){domUtils.remove(k);}else{e=k;break;}}}try{e.parentNode.removeChild(e);}catch(j){}c.moveToBookmark(b).select(true);f(e);},0);}UE.plugins["paste"]=function(){var f=this;var e={flag:""};var d=f.options.pasteplain===true;var b={flag:""};f.commands["pasteplain"]={queryCommandState:function(){return d;},execCommand:function(){d=!d|0;},notNeedUndo:1};function c(q){var p;if(q.firstChild){var t=domUtils.getElementsByTagName(q,"span");for(var w=0,k;k=t[w++];){if(k.id=="_baidu_cut_start"||k.id=="_baidu_cut_end"){domUtils.remove(k);}}if(browser.webkit){var r=q.querySelectorAll("div br");for(var w=0,h;h=r[w++];){var o=h.parentNode;if(o.tagName=="DIV"&&o.childNodes.length==1){o.innerHTML="<p><br/></p>";domUtils.remove(o);}}var v=q.querySelectorAll("#baidu_pastebin");for(var w=0,x;x=v[w++];){var A=f.document.createElement("p");x.parentNode.insertBefore(A,x);while(x.firstChild){A.appendChild(x.firstChild);}domUtils.remove(x);}var g=q.querySelectorAll("meta");for(var w=0,n;n=g[w++];){domUtils.remove(n);}var r=q.querySelectorAll("br");for(w=0;n=r[w++];){if(/^apple-/.test(n)){domUtils.remove(n);}}}if(browser.gecko){var s=q.querySelectorAll("[_moz_dirty]");for(w=0;n=s[w++];){n.removeAttribute("_moz_dirty");}}if(!browser.ie){var m=q.querySelectorAll("span.apple-style-span");for(var w=0,n;n=m[w++];){domUtils.remove(n,true);}}p=q.innerHTML;var y=f.serialize;if(y){try{var u=y.transformInput(y.parseHTML(y.word(p)),e);u=y.filter(u,d?{whiteList:{"p":{"br":1,"BR":1,$:{}},"br":{"$":{}},"div":{"br":1,"BR":1,"$":{}},"li":{"$":{}},"tr":{"td":1,"$":{}},"td":{"$":{}}},blackList:{"style":1,"script":1,"object":1}}:null,!d?b:null);if(browser.webkit){var j=u.children.length,l;while((l=u.children[j-1])&&l.tag=="br"){u.children.splice(j-1,1);j=u.children.length;}}p=y.toHTML(u,d);}catch(z){}}p={"html":p};f.fireEvent("beforepaste",p);f.execCommand("insertHtml",p.html,true);f.fireEvent("afterpaste");}}f.addListener("ready",function(){domUtils.on(f.body,"cut",function(){var g=f.selection.getRange();if(!g.collapsed&&f.undoManger){f.undoManger.save();}});domUtils.on(f.body,browser.ie||browser.opera?"keydown":"paste",function(g){if((browser.ie||browser.opera)&&(!g.ctrlKey||g.keyCode!="86")){return;}a.call(f,function(h){c(h);});});});};})();