UE.plugins["webapp"]=function(){var a=this;function b(d,f,e){return !f?(e?"<p>":"")+'<img title="'+d.title+'" width="'+d.width+'" height="'+d.height+'"'+' src="'+a.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+d.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+d.url+'" />'+(e?"</p>":""):'<iframe class="edui-faked-webapp" title="'+d.title+'" width="'+d.width+'" height="'+d.height+'"  scrolling="no" frameborder="0" src="'+d.url+'" logo_url = '+d.logo+"></iframe>";}function c(h){var f,d=domUtils.getElementsByTagName(a.document,!h?"iframe":"img");for(var e=0,g;g=d[e++];){if(g.className!="edui-faked-webapp"){continue;}f=a.document.createElement("div");f.innerHTML=b(h?{url:g.getAttribute("_url"),width:g.width,height:g.height,title:g.title,logo:g.style.backgroundImage.replace("url(","").replace(")","")}:{url:g.getAttribute("src",2),title:g.title,width:g.width,height:g.height,logo:g.getAttribute("logo_url")},h?true:false,false);g.parentNode.replaceChild(f.firstChild,g);}}a.addListener("beforegetcontent",function(){c(true);});a.addListener("aftersetcontent",function(){c(false);});a.addListener("aftergetcontent",function(d){if(d=="aftergetcontent"&&a.queryCommandState("source")){return;}c(false);});UE.commands["webapp"]={execCommand:function(d,e){a.execCommand("inserthtml",b(e,false,true));},queryCommandState:function(){return a.highlight?-1:0;}};};