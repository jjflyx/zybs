UE.plugins["pagebreak"]=function(){var d=this,b=["td"];function a(f){if(domUtils.isEmptyBlock(f)){var g=f.firstChild,e;while(g&&g.nodeType==1&&domUtils.isEmptyBlock(g)){e=g;g=g.firstChild;}!e&&(e=f);domUtils.fillNode(d.document,e);}}function c(e){return e&&e.nodeType==1&&e.tagName=="HR"&&e.className=="pagebreak";}d.commands["pagebreak"]={execCommand:function(){var j=d.selection.getRange(),m=d.document.createElement("hr");domUtils.setAttributes(m,{"class":"pagebreak",noshade:"noshade",size:"5"});domUtils.unselectable(m);var g=domUtils.findParentByTagName(j.startContainer,b,true),l=[],k;if(g){switch(g.tagName){case"TD":k=g.parentNode;if(!k.previousSibling){var n=domUtils.findParentByTagName(k,"table");n.parentNode.insertBefore(m,n);l=domUtils.findParents(m,true);}else{k.parentNode.insertBefore(m,k);l=domUtils.findParents(m);}k=l[1];if(m!==k){domUtils.breakParent(m,k);}domUtils.clearSelectedArr(d.currentSelectedArr);d.fireEvent("afteradjusttable",d.document);}}else{if(!j.collapsed){j.deleteContents();var f=j.startContainer;while(!domUtils.isBody(f)&&domUtils.isBlockElm(f)&&domUtils.isEmptyNode(f)){j.setStartBefore(f).collapse(true);domUtils.remove(f);f=j.startContainer;}}j.insertNode(m);var k=m.parentNode,i;while(!domUtils.isBody(k)){domUtils.breakParent(m,k);i=m.nextSibling;if(i&&domUtils.isEmptyBlock(i)){domUtils.remove(i);}k=m.parentNode;}i=m.nextSibling;var h=m.previousSibling;if(c(h)){domUtils.remove(h);}else{h&&a(h);}if(!i){var e=d.document.createElement("p");m.parentNode.appendChild(e);domUtils.fillNode(d.document,e);j.setStart(e,0).collapse(true);}else{if(c(i)){domUtils.remove(i);}else{a(i);}j.setEndAfter(m).collapse(false);}j.select(true);}},queryCommandState:function(){return this.highlight?-1:0;}};};