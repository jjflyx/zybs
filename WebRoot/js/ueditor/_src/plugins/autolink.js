UE.plugins["autolink"]=function(){var a=0;if(browser.ie){return;}var b=this;b.addListener("reset",function(){a=0;});b.addListener("keydown",function(j,l){var o=l.keyCode||l.which;if(o==32||o==13){var f=b.selection.getNative(),h=f.getRangeAt(0).cloneRange(),g,n;var d=h.startContainer;while(d.nodeType==1&&h.startOffset>0){d=h.startContainer.childNodes[h.startOffset-1];if(!d){break;}h.setStart(d,d.nodeType==1?d.childNodes.length:d.nodeValue.length);h.collapse(true);d=h.startContainer;}do{if(h.startOffset==0){d=h.startContainer.previousSibling;while(d&&d.nodeType==1){d=d.lastChild;}if(!d||domUtils.isFillChar(d)){break;}g=d.nodeValue.length;}else{d=h.startContainer;g=h.startOffset;}h.setStart(d,g-1);n=h.toString().charCodeAt(0);}while(n!=160&&n!=32);if(h.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(h.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(h.toString())){break;}try{h.setStart(h.startContainer,h.startOffset+1);}catch(i){var d=h.startContainer;while(!(next=d.nextSibling)){if(domUtils.isBody(d)){return;}d=d.parentNode;}h.setStart(next,0);}}var k=b.document.createElement("a"),m=b.document.createTextNode(" "),c;b.undoManger&&b.undoManger.save();k.appendChild(h.extractContents());k.href=k.innerHTML=k.innerHTML.replace(/<[^>]+>/g,"");c=k.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),"");c=/^(?:https?:\/\/)/ig.test(c)?c:"http://"+c;k.setAttribute("data_ue_src",c);k.href=c;h.insertNode(k);k.parentNode.insertBefore(m,k.nextSibling);h.setStart(m,0);h.collapse(true);f.removeAllRanges();f.addRange(h);b.undoManger&&b.undoManger.save();}}});};