(function(){var c=baidu.editor.utils,e=baidu.editor.ui.uiUtils,a=baidu.editor.dom.domUtils,h=baidu.editor.ui.UIBase,g=baidu.editor.ui.Popup=function(i){this.initOptions(i);this.initPopup();};var b=[];function f(l){var m=[];for(var k=0;k<b.length;k++){var j=b[k];if(!j.isHidden()){if(j.queryAutoHide(l)!==false){j.hide();}}}}g.postHide=f;var d=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];g.prototype={SHADOW_RADIUS:5,content:null,_hidden:false,autoRender:true,canSideLeft:true,canSideUp:true,initPopup:function(){this.initUIBase();b.push(this);},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%">'+' <div id="##_body" class="edui-popup-body">'+' <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: white;" frameborder="0" width="100%" height="100%" src="javascript:"></iframe>'+' <div class="edui-shadow"></div>'+' <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div>"+" </div>"+"</div>";},getContentHtmlTpl:function(){if(this.content){if(typeof this.content=="string"){return this.content;}return this.content.renderHtml();}else{return"";}},_UIBase_postRender:h.prototype.postRender,postRender:function(){if(this.content instanceof h){this.content.postRender();}this.fireEvent("postRenderAfter");this.hide(true);this._UIBase_postRender();},_doAutoRender:function(){if(!this.getDom()&&this.autoRender){this.render();}},mesureSize:function(){var i=this.getDom("content");return e.getClientRect(i);},fitSize:function(){var i=this.getDom("body");i.style.width="";i.style.height="";var j=this.mesureSize();i.style.width=j.width+"px";i.style.height=j.height+"px";return j;},showAnchor:function(j,i){this.showAnchorRect(e.getClientRect(j),i);},showAnchorRect:function(p,m,n){this._doAutoRender();var k=e.getViewportRect();this._show();var j=this.fitSize();var q,l,i,o;if(m){q=this.canSideLeft&&(p.right+j.width>k.right&&p.left>j.width);l=this.canSideUp&&(p.top+j.height>k.bottom&&p.bottom>j.height);i=(q?p.left-j.width:p.right);o=(l?p.bottom-j.height:p.top);}else{q=this.canSideLeft&&(p.right+j.width>k.right&&p.left>j.width);l=this.canSideUp&&(p.top+j.height>k.bottom&&p.bottom>j.height);i=(q?p.right-j.width:p.left);o=(l?p.top-j.height:p.bottom);}var r=this.getDom();e.setViewportOffset(r,{left:i,top:o});a.removeClasses(r,d);r.className+=" "+d[(l?1:0)*2+(q?1:0)];if(this.editor){r.style.zIndex=this.editor.container.style.zIndex*1+10;baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=r.style.zIndex-1;}},showAt:function(l){var k=l.left;var j=l.top;var i={left:k,top:j,right:k,bottom:j,height:0,width:0};this.showAnchorRect(i,false,true);},_show:function(){if(this._hidden){var i=this.getDom();i.style.display="";this._hidden=false;this.fireEvent("show");}},isHidden:function(){return this._hidden;},show:function(){this._doAutoRender();this._show();},hide:function(i){if(!this._hidden&&this.getDom()){this.getDom().style.display="none";this._hidden=true;if(!i){this.fireEvent("hide");}}},queryAutoHide:function(i){return !i||!e.contains(this.getDom(),i);}};c.inherits(g,h);a.on(document,"mousedown",function(i){var j=i.target||i.srcElement;f(j);});a.on(window,"scroll",function(){f();});})();