(function(){var d=baidu.editor.browser,c=baidu.editor.dom.domUtils;var g="$EDITORUI";var f=window[g]={};var a="ID"+g;var i=0;var b=baidu.editor.ui.uiUtils={uid:function(j){return(j?j[a]||(j[a]=++i):++i);},hook:function(j,l){var k;if(j&&j._callbacks){k=j;}else{k=function(){var p;if(j){p=j.apply(this,arguments);}var o=k._callbacks;var m=o.length;while(m--){var n=o[m].apply(this,arguments);if(p===undefined){p=n;}}return p;};k._callbacks=[];}k._callbacks.push(l);return k;},createElementByHtml:function(j){var k=document.createElement("div");k.innerHTML=j;k=k.firstChild;k.parentNode.removeChild(k);return k;},getViewportElement:function(){return(d.ie&&d.quirks)?document.body:document.documentElement;},getClientRect:function(j){var n;try{n=j.getBoundingClientRect();}catch(m){n={left:0,top:0,height:0,width:0};}var k={left:Math.round(n.left),top:Math.round(n.top),height:Math.round(n.bottom-n.top),width:Math.round(n.right-n.left)};var l;while((l=j.ownerDocument)!==document&&(j=c.getWindow(l).frameElement)){n=j.getBoundingClientRect();k.left+=n.left;k.top+=n.top;}k.bottom=k.top+k.height;k.right=k.left+k.width;return k;},getViewportRect:function(){var k=b.getViewportElement();var l=(window.innerWidth||k.clientWidth)|0;var j=(window.innerHeight||k.clientHeight)|0;return{left:0,top:0,height:j,width:l,bottom:j,right:l};},setViewportOffset:function(j,m){var k;var l=b.getFixedLayer();if(j.parentNode===l){j.style.left=m.left+"px";j.style.top=m.top+"px";}else{c.setViewportOffset(j,m);}},getEventOffset:function(j){var k=j.target||j.srcElement;var l=b.getClientRect(k);var m=b.getViewportOffsetByEvent(j);return{left:m.left-l.left,top:m.top-l.top};},getViewportOffsetByEvent:function(k){var l=k.target||k.srcElement;var j=c.getWindow(l).frameElement;var n={left:k.clientX,top:k.clientY};if(j&&l.ownerDocument!==document){var m=b.getClientRect(j);n.left+=m.left;n.top+=m.top;}return n;},setGlobal:function(k,j){f[k]=j;return g+'["'+k+'"]';},unsetGlobal:function(j){delete f[j];},copyAttributes:function(o,n){var l=n.attributes;var j=l.length;while(j--){var m=l[j];if(m.nodeName!="style"&&m.nodeName!="class"&&(!d.ie||m.specified)){o.setAttribute(m.nodeName,m.nodeValue);}}if(n.className){o.className+=" "+n.className;}if(n.style.cssText){o.style.cssText+=";"+n.style.cssText;}},removeStyle:function(k,j){if(k.style.removeProperty){k.style.removeProperty(j);}else{if(k.style.removeAttribute){k.style.removeAttribute(j);}else{throw"";}}},contains:function(k,j){return k&&j&&(k===j?false:(k.contains?k.contains(j):k.compareDocumentPosition(j)&16));},startDrag:function(r,n,p){var p=p||document;var m=r.clientX;var l=r.clientY;function k(t){var s=t.clientX-m;var u=t.clientY-l;n.ondragmove(s,u);if(t.stopPropagation){t.stopPropagation();}else{t.cancelBubble=true;}}if(p.addEventListener){function q(s){p.removeEventListener("mousemove",k,true);p.removeEventListener("mouseup",k,true);window.removeEventListener("mouseup",q,true);n.ondragstop();}p.addEventListener("mousemove",k,true);p.addEventListener("mouseup",q,true);window.addEventListener("mouseup",q,true);r.preventDefault();}else{var o=r.srcElement;o.setCapture();function j(){o.releaseCapture();o.detachEvent("onmousemove",k);o.detachEvent("onmouseup",j);o.detachEvent("onlosecaptrue",j);n.ondragstop();}o.attachEvent("onmousemove",k);o.attachEvent("onmouseup",j);o.attachEvent("onlosecaptrue",j);r.returnValue=false;}n.ondragstart();},getFixedLayer:function(){var j=document.getElementById("edui_fixedlayer");if(j==null){j=document.createElement("div");j.id="edui_fixedlayer";document.body.appendChild(j);if(d.ie&&d.version<=8){j.style.position="absolute";h();setTimeout(e);}else{j.style.position="fixed";}j.style.left="0";j.style.top="0";j.style.width="0";j.style.height="0";}return j;},makeUnselectable:function(k){if(d.opera||(d.ie&&d.version<9)){k.unselectable="on";if(k.hasChildNodes()){for(var j=0;j<k.childNodes.length;j++){if(k.childNodes[j].nodeType==1){b.makeUnselectable(k.childNodes[j]);}}}}else{if(k.style.MozUserSelect!==undefined){k.style.MozUserSelect="none";}else{if(k.style.WebkitUserSelect!==undefined){k.style.WebkitUserSelect="none";}else{if(k.style.KhtmlUserSelect!==undefined){k.style.KhtmlUserSelect="none";}}}}}};function e(){var j=document.getElementById("edui_fixedlayer");b.setViewportOffset(j,{left:0,top:0});}function h(j){c.on(window,"scroll",e);c.on(window,"resize",baidu.editor.utils.defer(e,0,true));}})();